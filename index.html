<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Scoreboard PRO</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:
    linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
    url("https://wallpaperaccess.com/full/1594761.jpg") no-repeat center center fixed;
  background-size: cover;
  color:white;
  overflow:hidden;
}

.topbar{
  text-align:center;
  padding:15px;
}

button{
  margin:6px;
  padding:12px 18px;
  font-size:18px;
  font-weight:bold;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:linear-gradient(45deg,#ffcc00,#ff9900);
  color:black;
}

.main{
  display:flex;
  justify-content:space-between;
  padding:20px 60px;
}

.team{
  width:30%;
  text-align:center;
}

.team-name{
  font-size:30px;
  font-weight:bold;
}

.team-score{
  font-size:70px;
  font-weight:900;
}

.cards{
  font-size:28px;
}

.scorers{
  margin-top:10px;
  min-height:120px;
  text-align:left;
}

.center{
  width:30%;
  text-align:center;
}

.global-score{
  font-size:110px;
  font-weight:900;
}

.overlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:90px;
  font-weight:900;
  opacity:0;
  pointer-events:none;
  transition:0.3s;
  text-align:center;
}

.goal{background:radial-gradient(circle,red,darkred);}
.half{background:black;}
.end{background:black;}
.red{background:darkred; animation: redCard 2s ease-in-out;}

@keyframes redCard {
  0% { background:darkred; }
  100% { background:black; }
}

</style>
</head>

<body>

<div class="topbar">
‚è± <span id="timeDisplay">00:00</span><br>
Dur√©e mi-temps :
<input type="number" id="halfDuration" value="45" style="width:60px">
<br>
<button onclick="startTimer()">START</button>
<button onclick="pauseTimer()">PAUSE</button>
<button onclick="resetAll()">RESET</button>
</div>

<div class="main">

<div class="team">
<div class="team-name">Theo</div>
<div class="team-score" id="scoreA">0</div>
<div class="cards">üü® <span id="yellowA">0</span> | üü• <span id="redA">0</span></div>
<div class="scorers" id="scorersA"></div>
<button onclick="addGoal('A')">+ BUT</button>
<button onclick="addYellow('A')">+ JAUNE</button>
<button onclick="addRed('A')">+ ROUGE</button>
</div>

<div class="center">
<div class="global-score">
<span id="gA">0</span> - <span id="gB">0</span>
</div>
</div>

<div class="team">
<div class="team-name">Tom</div>
<div class="team-score" id="scoreB">0</div>
<div class="cards">üü® <span id="yellowB">0</span> | üü• <span id="redB">0</span></div>
<div class="scorers" id="scorersB"></div>
<button onclick="addGoal('B')">+ BUT</button>
<button onclick="addYellow('B')">+ JAUNE</button>
<button onclick="addRed('B')">+ ROUGE</button>
</div>

</div>

<!-- OVERLAYS -->
<div class="overlay goal" id="goalOverlay"></div>
<div class="overlay half" id="halfOverlay">MI-TEMPS<br><small>Touchez l'√©cran</small></div>
<div class="overlay end" id="endOverlay">FIN DU MATCH<br><small>Touchez l'√©cran</small></div>
<div class="overlay" id="extraTimeOverlay">Temps additionnel : <span id="extraTimeDisplay">0</span> min</div>

<audio id="whistle" src="https://actions.google.com/sounds/v1/sports/referee_whistle.ogg"></audio>

<script>

// Variables
let scoreA = 0, scoreB = 0;
let yellowA = 0, yellowB = 0;
let redA = 0, redB = 0;
let seconds = 0;
let timer = null;
let halfDuration = 45;
let period = 1;
let addedTime = 0;  // Temps additionnel
let goalsBeforeHalf = 0; // Nombre de buts avant la mi-temps
let pausedForHalf = false;

function update() {
    document.getElementById("scoreA").textContent = scoreA;
    document.getElementById("scoreB").textContent = scoreB;
    document.getElementById("gA").textContent = scoreA;
    document.getElementById("gB").textContent = scoreB;
    document.getElementById("yellowA").textContent = yellowA;
    document.getElementById("yellowB").textContent = yellowB;
    document.getElementById("redA").textContent = redA;
    document.getElementById("redB").textContent = redB;
}

// Afficher l'overlay (e.g. goal, mi-temps, etc.)
function showOverlay(id) {
    let o = document.getElementById(id);
    o.style.opacity = 1;
    o.style.pointerEvents = "auto";
}

// Cacher l'overlay
function hideOverlay(id) {
    let o = document.getElementById(id);
    o.style.opacity = 0;
    o.style.pointerEvents = "none";
}

// Ajouter un but
function addGoal(team) {
    let player = prompt("Nom du joueur ?");
    let minute = Math.floor(seconds / 60);

    if (!player || player.trim() === "") {
        setTimeout(() => {
            player = (team === "A") ? "Theo" : "Tom";
        }, 10000);
        player = (team === "A") ? "Theo" : "Tom";
    }

    if (team === "A") {
        scoreA++;
        document.getElementById("scorersA").innerHTML += "‚öΩ " + player + " " + minute + "'<br>";
    } else {
        scoreB++;
        document.getElementById("scorersB").innerHTML += "‚öΩ " + player + " " + minute + "'<br>";
    }

    document.getElementById("goalOverlay").innerHTML = "GOOOOAL ‚öΩ<br>" + player + " " + minute + "'";
    showOverlay("goalOverlay");
    setTimeout(() => hideOverlay("goalOverlay"), 2000);

    // Compter les buts avant la mi-temps pour ajouter le temps additionnel
    if (Math.floor(seconds / 60) < halfDuration) {
        goalsBeforeHalf++;
        addedTime += 5;  // Ajouter 5 secondes pour chaque but avant la mi-temps
    }

    update();
}

// Ajouter un carton jaune
function addYellow(team) {
    if (team === "A") yellowA++; else yellowB++;
    update();
}

// Ajouter un carton rouge
function addRed(team) {
    if (team === "A") redA++; else redB++;
    showOverlay("redOverlay");
    setTimeout(() => hideOverlay("redOverlay"), 2500);
    update();
}

// D√©marrer le timer
function startTimer() {
    if (timer) return;
    halfDuration = parseInt(document.getElementById("halfDuration").value);

    timer = setInterval(() => {
        seconds++;
        let m = Math.floor((seconds + addedTime) / 60);
        let s = (seconds + addedTime) % 60;
        document.getElementById("timeDisplay").textContent = m + ":" + String(s).padStart(2, "0");

        // Mi-temps
        if (period === 1 && m === halfDuration) {
            pauseTimer();
            let w = document.getElementById("whistle");
            w.play(); setTimeout(() => w.play(), 400);
            showOverlay("halfOverlay");
            pausedForHalf = true;
        }

        // Fin du match
        if (period === 2 && m === halfDuration * 2) {
            pauseTimer();
            let w = document.getElementById("whistle");
            w.play(); setTimeout(() => w.play(), 400);
            setTimeout(() => w.play(), 800);
            showOverlay("endOverlay");
            document.getElementById("extraTimeDisplay").textContent = addedTime / 60;  // Afficher le temps additionnel
            showOverlay("extraTimeOverlay");
        }

    }, 1000);
}

// Mettre en pause le timer
function pauseTimer() {
    clearInterval(timer);
    timer = null;
}

// R√©initialiser le score et tout
function resetAll() {
    pauseTimer();
    scoreA = scoreB = yellowA = yellowB = redA = redB = 0;
    seconds = 0;
    addedTime = 0;
    goalsBeforeHalf = 0;
    period = 1;
    document.getElementById("scorersA").innerHTML = "";
    document.getElementById("scorersB").innerHTML = "";
    document.getElementById("timeDisplay").textContent = "00:00";
    hideOverlay("halfOverlay");
    hideOverlay("endOverlay");
    hideOverlay("extraTimeOverlay");
    update();
}

// Interaction pour mi-temps
document.getElementById("halfOverlay").onclick = function () {
    hideOverlay("halfOverlay");
    period = 2;
    startTimer();
}

// Interaction pour fin du match
document.getElementById("endOverlay").onclick = function () {
    hideOverlay("endOverlay");
}

update();

</script>

</body>
</html>
